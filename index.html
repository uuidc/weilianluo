<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>ERP Â· Overview</title>
  <style>
    :root{
  --bg:#f5f5f7;
  --card:#ffffff;
  --line:#e5e5ea;
  --text:#111111;
  --muted:#6e6e73;
  --tint:#0071e3;
  --success:#34c759;
  --warn:#ff9f0a;
  --danger:#ff3b30;
  --shadow-xs:0 2px 10px rgba(0,0,0,.06);
  --shadow:0 6px 24px rgba(0,0,0,.06);
  --radius:18px;
  --radius-lg:22px;
}

*{box-sizing:border-box}
html,body{background:var(--bg);color:var(--text)}
body{
  margin:0;
  font:14px/1.6 -apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Noto Sans CJK SC",sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.page{
  max-width:560px;
  margin:0 auto;
  padding:calc(16px + env(safe-area-inset-top,0)) 12px 48px;
}

/* ===== é¡¶éƒ¨æ ‡é¢˜ ===== */
.hero{
  display:flex;align-items:center;gap:10px;
  margin:4px 2px 10px;
}
.hero-dot{
  width:18px;height:18px;border-radius:50%;
  background:linear-gradient(135deg,#0a84ff,#64d2ff);
  box-shadow:0 6px 16px rgba(10,132,255,.35);
}
.hero h1{
  margin:0 0 0 5px;font-size:18px;font-weight:800;letter-spacing:-.2px;
}

/* ===== å·¥å…·æ ï¼ˆä¿®å¤ç•™ç™½ç‰ˆï¼‰ ===== */
.toolbar{
  position:sticky;
  top:10px;
  z-index:10;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;                       /* ç¼©å°é—´è· */
  flex-wrap:wrap;
  margin:8px 2px 14px;
  background:transparent;
  border:0;
  box-shadow:none;
  padding:0;
}

/* æœç´¢æ¡†ï¼šç‹¬å ä¸€è¡Œ */
.toolbar .search{
  flex:1 1 100%;
  display:flex;
  align-items:center;
  background:#fff;
  border:1px solid var(--line);
  border-radius:999px;
  padding:10px 14px;
  gap:8px;
  box-shadow:var(--shadow-xs);
}
.search input{
  border:0;
  outline:0;
  background:transparent;
  width:100%;
  font-size:14px;
}
.icon{font-style:normal;opacity:.6}

/* åˆ†æ®µæ§ä»¶ä¸åˆ·æ–°æŒ‰é’®è´´åˆå¸ƒå±€ */
.toolbar .seg{
  flex:unset;
  margin-top:5px;
  display:flex;
  background:#fff;
  border:1px solid var(--line);
  border-radius:999px;
  overflow:hidden;
  box-shadow:var(--shadow-xs);
  min-width:220px;
  margin-right:0;                /* å»é™¤å¤šä½™é—´è· */
}
.toolbar .seg button{
  border:0;
  background:transparent;
  padding:10px 16px;
  font-size:13px;
  color:var(--muted);
  min-width:72px;
}
.toolbar .seg button.active{
  background:#000;
  color:#fff;
}
.toolbar .pill{
  flex:0 0 auto;
  margin-top:5px;
  background:#fff;
  border:1px solid var(--line);
  border-radius:999px;
  padding:10px 16px;
  font-size:13px;
  box-shadow:var(--shadow-xs);
  margin-left:0;                 /* å…³é”®ï¼šè´´ç´§åˆ†æ®µæ§ä»¶ */
}

/* å®½å±æ—¶ç´§å‡‘æ’åˆ— */
@media (min-width:480px){
  .toolbar .search{flex:1 1 60%;}
  .toolbar .seg{flex:0 0 auto;}
}

/* ===== å¡ç‰‡ç»Ÿä¸€é£æ ¼ ===== */
.card{
  background:var(--card);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow);
  padding:16px;
  margin:12px 0;
  border:1px solid var(--line);
}
.section-title{
  display:flex;align-items:center;justify-content:space-between;margin:2px 2px 12px;
  font-weight:700;font-size:15px;
}
.subtle{color:var(--muted);font-weight:500;font-size:12px}

/* ===== URL å‚æ•° ===== */
.kv{
  display:grid;
  grid-template-columns:120px 1fr;
  row-gap:10px;
  column-gap:10px;
}
.kv .k{color:var(--muted)}
.kv .v{
  font-weight:600;
  color:var(--text);
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  word-break:break-all;
}
.tag{
  display:inline-block;
  padding:2px 8px;
  border-radius:999px;
  background:#eef5ff;
  color:#0a84ff;
  font-size:12px;
}

/* ===== KPI ===== */
.kpis{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
@media (max-width:360px){.kpis{grid-template-columns:1fr}}
.kpi{
  background:#fff;
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  box-shadow:var(--shadow-xs);
}
.kpi .n{font-size:22px;font-weight:800;letter-spacing:-0.3px}
.kpi .t{color:var(--muted);font-size:12px;margin-top:4px}
.kpi .trend{font-size:12px;margin-top:6px}
.up{color:var(--success)} .down{color:var(--danger)}

/* ===== åˆ—è¡¨ ===== */
.list{display:flex;flex-direction:column}
.row{
  display:flex;
  gap:14px;
  padding:12px 0;
  border-bottom:1px solid var(--line);
}
.row:last-child{border-bottom:0}
.thumb{
  width:64px;
  height:64px;
  border-radius:14px;
  object-fit:cover;
  flex:0 0 auto;
  border:1px solid var(--line);
  background:#fafafa;
}
.col{flex:1;min-width:0}
.title{font-weight:700}
.meta{color:var(--muted);font-size:12px;margin-top:2px}
.right{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:6px;
  min-width:96px;
}
.amt{font-weight:800;letter-spacing:.2px}
.status{
  font-size:12px;
  border:1px solid var(--line);
  padding:2px 8px;
  border-radius:999px;
}
.s-wait{background:#fff7ec;color:var(--warn)}
.s-done{background:#ecfff5;color:var(--success)}
.s-ship{background:#ecf7ff;color:#0a84ff}
.s-cancel{background:#fff1f0;color:var(--danger)}

/* ===== åº“å­˜è¿›åº¦æ¡ ===== */
.bar{
  height:8px;
  background:#f2f2f7;
  border-radius:999px;
  overflow:hidden;
  border:1px solid var(--line);
}
.bar>i{display:block;height:100%;background:linear-gradient(90deg,#0a84ff,#64d2ff)}

/* ===== åº•éƒ¨å®‰å…¨è·ç¦» ===== */
.safe{height:24px}

/* ===== å°å±ç»†èŠ‚ ===== */
@media (max-width:360px){
  .kv{grid-template-columns:105px 1fr}
  .seg button{min-width:64px}
}

/* ===== æš—è‰²æ¨¡å¼ ===== */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0b0f;
    --card:#111113;
    --line:#2a2a2e;
    --text:#f5f5f7;
    --muted:#a1a1a6;
    --shadow-xs:0 2px 10px rgba(0,0,0,.5);
    --shadow:0 10px 30px rgba(0,0,0,.55);
  }
  .search,.seg,.pill{background:#151517}
  .tag{background:#0b3a66;color:#93caff}
  .bar{background:#1a1a1c}
}
  </style>
</head>
<body>
  <div class="page">
    <!-- é¡¶éƒ¨æ ‡é¢˜ -->
<div class="hero">
  <div class="hero-dot"></div>
  <h1>å¾®è”ç»œè‡ªå®šä¹‰ä¾§è¾¹æ DEMO</h1>
</div>
    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <div class="toolbar">
      <div class="search">
        <span class="icon">ğŸ”</span>
        <input id="kw" placeholder="æœç´¢å•å·ã€SKUã€å®¢æˆ·â€¦" />
      </div>
      <div class="seg" id="range">
        <button data-k="d" class="active">ä»Šå¤©</button>
        <button data-k="w">æœ¬å‘¨</button>
        <button data-k="m">æœ¬æœˆ</button>
      </div>
      <button id="reload" class="pill">åˆ·æ–°æ•°æ®</button>
    </div>

    <!-- URL å‚æ•° -->
    <div class="card">
      <div class="section-title">
        <span>URL å‚æ•°</span>
        <span class="tag" id="paramFrom">æ— å‚æ•°</span>
      </div>
      <div class="kv" id="paramList">
        <div class="k">æš‚æ— </div><div class="v">-</div>
      </div>
    </div>

    <!-- æ¦‚è§ˆ KPI -->
    <div class="card">
      <div class="section-title">
        <span>æ¦‚è§ˆ</span>
        <span class="subtle" id="summaryRange">ä»Šå¤©</span>
      </div>
      <div class="kpis" id="kpis"></div>
    </div>

    <!-- é”€å”®ï¼ˆå«å›¾ç‰‡ï¼‰ -->
    <div class="card">
      <div class="section-title"><span>é”€å”®</span><span class="subtle" id="salesCount"></span></div>
      <div class="list" id="salesList"></div>
    </div>

    <!-- é‡‡è´­ -->
    <div class="card">
      <div class="section-title"><span>é‡‡è´­</span><span class="subtle" id="poCount"></span></div>
      <div class="list" id="poList"></div>
    </div>

    <!-- åº“å­˜ -->
    <div class="card">
      <div class="section-title"><span>åº“å­˜</span><span class="subtle" id="invCount"></span></div>
      <div class="list" id="invList"></div>
    </div>

    <!-- å®¢æˆ· -->
    <div class="card">
      <div class="section-title"><span>å®¢æˆ·</span><span class="subtle" id="custCount"></span></div>
      <div class="list" id="custList"></div>
    </div>

    <div class="safe"></div>
  </div>

  <script>
    /* ========== URL å‚æ•°ï¼ˆè‡ªåŠ¨éå†ï¼‰ ========== */
    const params = new URLSearchParams(location.search);
    const paramEntries = Array.from(params.entries());
    document.getElementById('paramFrom').textContent = paramEntries.length ? 'å·²æ‹¼æ¥å‚æ•°' : 'æ— å‚æ•°';
    const paramList = document.getElementById('paramList');
    if (paramEntries.length){
      paramList.innerHTML = paramEntries.map(([k,v]) =>
        `<div class="k">${k}</div><div class="v">${v || '(ç©º)'}</div>`
      ).join('');
    }

    /* ========== éšæœºæ•°æ®ç”Ÿæˆï¼ˆERP æ¨¡å—ï¼‰ ========== */
    const r     = (min,max)=>Math.floor(Math.random()*(max-min+1))+min;
    const pick  = arr=>arr[r(0,arr.length-1)];
    const money = n=>'ï¿¥'+Number(n).toFixed(2);

    // å ä½å•†å“å›¾ï¼ˆè‹¹æœé£æ¸…çˆ½å›¾ï¼‰ï¼šä½¿ç”¨ picsum + ç¨³å®šç§å­
    const THUMBS = ['dress','bag','chair','watch','lamp','shoe','cup','plant','glass','coat']
      .map(k => (seed)=>`https://picsum.photos/seed/${k}-${seed}/200`);

    const STATUS = [
      {t:'å¾…å‘è´§', cls:'s-wait'},
      {t:'å·²å‘è´§', cls:'s-ship'},
      {t:'å·²å®Œæˆ', cls:'s-done'},
      {t:'å·²å–æ¶ˆ', cls:'s-cancel'},
    ];
    const SUPPLIERS = ['å’Œé£ä¾›é”€','æ™¨æ›¦å·¥è´¸','è¿œèˆªæ™ºé€ ','æ²å…‰æœé¥°','è¾°æ›œå®¶å±…','ç ”è¡Œæ•°ç '];
    const SKUS = ['A12-ç±³ç™½-S','B09-æ›œé»‘-M','C33-é›¾è“-L','D21-å²©ç°-å‡ç ','E88-æµ…å¡å…¶-26','F17-æ˜Ÿç©ºè“-æ ‡å‡†'];
    const CUSTOMERS = ['èµµ*','é’±*','å­™*','æ*','å‘¨*','å´*','éƒ‘*','ç‹*','å†¯*','é™ˆ*'];

    const makeSales = (n=6) => Array.from({length:n}, (_,i)=> {
      const qty = r(1,3), price = r(69,399);
      const status = pick(STATUS);
      const thumb = pick(THUMBS)(Date.now()+i);
      return {
        no: 'SO'+(Date.now().toString().slice(-6))+i,
        sku: pick(SKUS),
        title: ['æ³•å¼è¿è¡£è£™','é€šå‹¤æ‰‹æåŒ…','åŒ—æ¬§å°ç¯','ç®€çº¦é©¬å…‹æ¯','è¿åŠ¨ä¼‘é—²é‹','æç®€å¤–å¥—'][r(0,5)],
        thumb, qty, price, amount: qty*price, status
      };
    });

    const makePO = (n=4)=> Array.from({length:n}, (_,i)=>({
      no:'PO'+(Date.now().toString().slice(-6))+i,
      supplier: pick(SUPPLIERS),
      lines: r(1,5),
      amount: r(500,8000),
      eta: r(2,10)+' å¤©å'
    }));

    const makeInv = (n=6)=> Array.from({length:n}, (_,i)=> {
      const capacity = r(200,1200), stock = r(20,capacity);
      return {
        sku: pick(SKUS),
        name: ['åŸºç¡€Tæ¤','é’ˆç»‡å¼€è¡«','è½»è–„ç¾½ç»’','ä¾¿æºå’–å•¡æ¯','æ—¥å¼èŠ±ç“¶','åŒ—æ¬§é æ•'][r(0,5)],
        stock, capacity, pct: Math.round(stock/capacity*100)
      };
    });

    const makeCust = (n=5)=> Array.from({length:n}, (_,i)=>({
      name: pick(CUSTOMERS),
      orders: r(1,12),
      gmv: r(200,12000),
      last: r(1,15)+' å¤©å‰'
    }));

    /* ========== æ¸²æŸ“ ========== */
    const $ = sel => document.querySelector(sel);
    const setText = (sel, txt)=>{ const el = $(sel); if(el) el.textContent = txt; };

    function renderKPIs(sales, po, inv, cust){
      const totals = {
        gmv: sales.reduce((s,x)=>s+x.amount,0),
        ord: sales.length,
        sku: inv.length,
        wait: sales.filter(s=>s.status.t==='å¾…å‘è´§').length
      };
      const kpiTpl = (n,t,trend='+'+r(1,9)+'%') =>
        `<div class="kpi"><div class="n">${n}</div><div class="t">${t}</div>
         <div class="trend ${Math.random()>0.5?'up':'down'}">${trend}</div></div>`;
      $('#kpis').innerHTML = [
        kpiTpl(money(totals.gmv),'GMV'),
        kpiTpl(totals.ord,'è®¢å•é‡'),
        kpiTpl(totals.sku,'åº“å­˜SKU'),
        kpiTpl(totals.wait,'å¾…å‘è´§')
      ].join('');
    }

    function renderSales(list){
      setText('#salesCount', `å…± ${list.length} æ¡`);
      $('#salesList').innerHTML = list.map(s => `
        <div class="row">
          <img class="thumb" src="${s.thumb}" alt="${s.title}">
          <div class="col">
            <div class="title">${s.title}</div>
            <div class="meta">å•å· ${s.no} Â· SKU ${s.sku} Â· x${s.qty}</div>
          </div>
          <div class="right">
            <div class="amt">${money(s.amount)}</div>
            <div class="status ${s.status.cls}">${s.status.t}</div>
          </div>
        </div>
      `).join('');
    }

    function renderPO(list){
      setText('#poCount', `å…± ${list.length} æ¡`);
      $('#poList').innerHTML = list.map(p => `
        <div class="row">
          <div class="col">
            <div class="title">${p.supplier}</div>
            <div class="meta">é‡‡è´­å• ${p.no} Â· æ˜ç»† ${p.lines} è¡Œ Â· äº¤æœŸ ${p.eta}</div>
          </div>
          <div class="right">
            <div class="amt">${money(p.amount)}</div>
            <div class="status">å¾…åˆ°è´§</div>
          </div>
        </div>
      `).join('');
    }

    function renderInv(list){
      setText('#invCount', `å…± ${list.length} æ¡`);
      $('#invList').innerHTML = list.map(i => `
        <div class="row">
          <div class="col">
            <div class="title">${i.name} <span class="subtle">Â· ${i.sku}</span></div>
            <div class="meta">åº“å­˜ ${i.stock}/${i.capacity}</div>
            <div class="bar"><i style="width:${i.pct}%"></i></div>
          </div>
          <div class="right">
            <div class="status ${i.pct<20?'s-cancel': i.pct<50?'s-wait':'s-done'}">${i.pct}%</div>
          </div>
        </div>
      `).join('');
    }

    function renderCust(list){
      setText('#custCount', `å…± ${list.length} ä½`);
      $('#custList').innerHTML = list.map(c => `
        <div class="row">
          <div class="col">
            <div class="title">${c.name}</div>
            <div class="meta">è®¢å• ${c.orders} Â· è¿‘ä¸€æ¬¡ ${c.last}</div>
          </div>
          <div class="right">
            <div class="amt">${money(c.gmv)}</div>
            <div class="status">ç´¯è®¡GMV</div>
          </div>
        </div>
      `).join('');
    }

    /* ========== æ•°æ®é©±åŠ¨ ========== */
    let sales=[], po=[], inv=[], cust=[];
    function regen(){
      sales = makeSales(r(5,8));
      po    = makePO(r(3,5));
      inv   = makeInv(r(5,8));
      cust  = makeCust(r(4,6));
      renderKPIs(sales,po,inv,cust);
      renderSales(sales);
      renderPO(po);
      renderInv(inv);
      renderCust(cust);
    }
    regen();

    /* ========== äº¤äº’ï¼šæ—¶é—´æ®µã€æœç´¢ã€åˆ·æ–° ========== */
    document.getElementById('range').addEventListener('click', (e)=>{
      if(e.target.tagName!=='BUTTON') return;
      [...e.currentTarget.children].forEach(b=>b.classList.remove('active'));
      e.target.classList.add('active');
      const map={d:'ä»Šå¤©',w:'æœ¬å‘¨',m:'æœ¬æœˆ'};
      document.getElementById('summaryRange').textContent = map[e.target.dataset.k] || 'ä»Šå¤©';
      regen(); // ç®€åŒ–å¤„ç†ï¼šåˆ‡æ¢æ—¶é—´æ®µå³åˆ·æ–°éšæœºæ•°æ®
    });

    document.getElementById('reload').addEventListener('click', regen);

    document.getElementById('kw').addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase();
      const filter = (arr, get)=>arr.filter(x=>get(x).toLowerCase().includes(q));
      renderSales(q? filter(sales, x=>`${x.no} ${x.sku} ${x.title}`) : sales);
      renderPO(q? filter(po,    x=>`${x.no} ${x.supplier}`) : po);
      renderInv(q? filter(inv,  x=>`${x.sku} ${x.name}`) : inv);
      renderCust(q? filter(cust, x=>`${x.name}`) : cust);
    });
  </script>
</body>
</html>
